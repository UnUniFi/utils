<form #formRef="ngForm" (submit)="
    onSubmit(
      collateralTypeRef.value,
      collateralDenomRef.value,
      collateralAmountRef.value,
      principalDenomRef.value,
      principalAmountRef.value,
      privateKeyRef.value
    )
  ">
  <div>
    <mat-form-field class="w-full">
      <mat-label>Collateral Type</mat-label>
      <mat-select #collateralTypeRef [(ngModel)]="selectedCollateralType" name="collateral-type" matInput required (valueChange)="onSelectedCollateralTypeChanged($event)">
        <ng-template ngFor let-param [ngForOf]="collateralParams || []">
          <mat-option [value]="param.type">{{ param.type }}</mat-option>
        </ng-template>
      </mat-select>
    </mat-form-field>
  </div>

  <div>
    <mat-form-field class="w-full">
      <mat-label>Collateral Denom</mat-label>
      <input #collateralDenomRef [(ngModel)]="selectedCollateralParam && selectedCollateralParam.denom" name="collateral-denom" matInput readonly />
    </mat-form-field>
    <mat-form-field class="w-full">
      <mat-label>Collateral Amount</mat-label>
      <input #collateralAmountRef ngModel name="collateral-amount" matInput type="number" pattern="^\d+$" [min]="1" required />
    </mat-form-field>
  </div>

  <div>
    <mat-form-field class="w-full">
      <mat-label>Principal Denom</mat-label>
      <input
        #principalDenomRef
        [(ngModel)]="
          selectedCollateralParam &&
          selectedCollateralParam.debt_limit &&
          selectedCollateralParam.debt_limit.denom
        "
        name="principal-denom"
        matInput readonly
      />
    </mat-form-field>
    <mat-form-field class="w-full">
      <mat-label>Principal Amount</mat-label>
      <input #principalAmountRef ngModel name="principal-amount" matInput type="number" pattern="^\d+$" [min]="1" required />
    </mat-form-field>
  </div>

  <mat-form-field class="w-full">
    <mat-label>ID</mat-label>
    <input #idRef type="text" name="id" [ngModel]="key?.id" autocomplete="username" matInput readonly />
  </mat-form-field>
  <mat-form-field class="w-full">
    <mat-label>Private key</mat-label>
    <input #privateKeyRef ngModel type="password" name="privateKey" autocomplete="current-password" matInput required />
  </mat-form-field>
  <button mat-flat-button class="w-full" color="accent" [disabled]="formRef.invalid">Submit</button>
</form>
